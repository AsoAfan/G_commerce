register:
  post:
    summary: Create new user

    tags:
      - "Auth"
    description: Creates new user and email verification will be sent.
      <a href = "http://127.0.0.1:8000/img/register.png" target="_blank">See Code Snippet</a>


    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              email:
                type: string
                format: email
                example: "jonDoe@example.com"

              password:
                type: string
                minimum: 8
                example: "password"
              password_confirmation:
                type: string
                description: Same as password
                example: "password"
    responses:
      200:
        $ref: '#/components/responses/200'

      400:
        description: email is duplicated
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Email already assigned to another account
                code:
                  type: integer
                  example: 400
      422:
        $ref: '#/components/responses/422'
verify-{slug}:
  post:
    tags:
      - Auth
    summary: verifies email
    description: Verify user email with otp sent to his email.
      <a href = "http://127.0.0.1:8000/img/EmailVerify.png" target="_blank">See Code Snippet</a>
    parameters:
      - name: slug
        in: path
        required: true
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              secret:
                type: string
                example: "539159"
    responses:
      200:
        description: Email verified successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "JonDoe@example.com Verified successfully"
                code:
                  type: integer
                  example: 200
                data:
                  example:
                    - time:2024-01-06T21:09:55.000000Z

      202:
        $ref: '#/components/responses/202'

      400:
        description: you are late this time
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Code has been expired
                code:
                  type: integer
                  example: 400
      404:
        $ref: '#/components/responses/404'
      422:
        description: wrong code
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Invalid verification code
                code:
                  type: integer
                  example: 422
verify-resend:
  post:
    summary: Verification again!
    tags:
      - Auth
    description: sends new email verification request.
      <a href = "http://127.0.0.1:8000/img/EmailVerify.png" target="_blank">See Code Snippet</a>
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              email:
                type: string
                format: email
                example: "JonDoe@example.com"
    responses:
      200:
        $ref: '#/components/responses/200'
      202:
        $ref: '#/components/responses/202'
      429:
        description: "it is enough for now, take a rest"
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: To many requests try again later
                code:
                  type: integer
                  example: 429
login:
  post:
    summary: Logs user in
    tags:
      - Auth
    description: Checks user credential and generates a token for him.
      <a href = "http://127.0.0.1:8000/img/Login.png" target="_blank">See Code Snippet</a>
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              email:
                type: string
                format: email
                example: "jonDoe@example.com"
              password:
                type: string
                example: "password"
    responses:
      200:
        $ref: '../components/responses.yaml#/userResponse/200'
#      TODO: CHECK LATER
      400:
        description: E-mail or Password is invalid
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Invalid credentials
                code:
                  type: integer
                  example: 400

      403:
        description: Email not verified
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Verify email first
                code:
                  type: integer
                data:
                  type: array
                  example:
                    - email:JonDoe@example.com


      404:
        description: User does not exist
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: it seems you don't have account! no problem just signup
                code:
                  type: integer
                  example: 404

#                  TODO: Continue Refactoring...
      422:
        $ref: '#/components/responses/422'
logout:
  post:
    tags:
      - Auth
    summary: Logs user out
    description: Removes all tokens for current user.
      <a href = "http://127.0.0.1:8000/img/Logout.png" target="_blank">See Code Snippet</a>
    security:
      - ApiKey: [ ]
    responses:
      200:
        description: Logout succeed
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Logout succeed.
      401:
        $ref: '../components/responses.yaml#/general/401'
